<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário para Visto Americano</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
        }
        label {
            display: block;
            margin: 10px 0 5px;
        }
        input, select, textarea {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
        }
        button {
            background-color: #25D366;
            color: white;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #20b354;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <h1>Formulário para Visto Americano</h1>
    <p>Preencha os dados abaixo. Ao clicar em "Enviar", um PDF será gerado e baixado automaticamente.</p>

    <form id="visaForm" name="visaForm" method="POST">
        <h3>Informações Pessoais</h3>
        <label for="nome">Nome completo (como no passaporte):</label>
        <input type="text" id="nome" name="nome">

        <label for="sobrenome">Sobrenome (como no passaporte):</label>
        <input type="text" id="sobrenome" name="sobrenome">

        <label for="outrosNomes">Já usou outros nomes? (ex.: nome de solteiro, apelido):</label>
        <input type="text" id="outrosNomes" name="outrosNomes">

        <label for="nascimento">Data de nascimento:</label>
        <input type="date" id="nascimento" name="nascimento">

        <label for="cpf">CPF:</label>
        <input type="text" id="cpf" name="cpf" placeholder="Digite o CPF">

        <label for="localNascimento">Cidade e país de nascimento:</label>
        <input type="text" id="localNascimento" name="localNascimento">

        <label for="sexo">Sexo:</label>
        <select id="sexo" name="sexo">
            <option value="">Selecione</option>
            <option value="Masculino">Masculino</option>
            <option value="Feminino">Feminino</option>
            <option value="Outro">Outro</option>
        </select>

        <label for="estadoCivil">Estado civil:</label>
        <select id="estadoCivil" name="estadoCivil" onchange="toggleSpouseInfo()">
            <option value="">Selecione</option>
            <option value="Solteiro">Solteiro</option>
            <option value="Casado">Casado</option>
            <option value="Divorciado">Divorciado</option>
            <option value="Viúvo">Viúvo</option>
            <option value="União Estável">União Estável</option>
        </select>

        <div id="spouseInfo" class="hidden">
            <h4>Dados do Cônjuge</h4>
            <label for="spouseNome">Nome completo do cônjuge:</label>
            <input type="text" id="spouseNome" name="spouseNome">

            <label for="spouseNascimento">Data de nascimento do cônjuge:</label>
            <input type="date" id="spouseNascimento" name="spouseNascimento">

            <label for="spouseLocalNascimento">Cidade e país de nascimento do cônjuge:</label>
            <input type="text" id="spouseLocalNascimento" name="spouseLocalNascimento">

            <div id="spousePassportInfo" class="hidden">
                <label for="spousePassaporte">Número do passaporte do cônjuge:</label>
                <input type="text" id="spousePassaporte" name="spousePassaporte">
            </div>

            <div id="spouseDeathInfo" class="hidden">
                <label for="spouseFalecimento">Data de falecimento do cônjuge:</label>
                <input type="date" id="spouseFalecimento" name="spouseFalecimento">
            </div>
        </div>

        <label for="nacionalidade">Nacionalidade atual:</label>
        <input type="text" id="nacionalidade" name="nacionalidade">

        <label for="outrasNacionalidades">Possui outras nacionalidades? (Se sim, quais?):</label>
        <input type="text" id="outrasNacionalidades" name="outrasNacionalidades">

        <label for="passaporte">Número do passaporte:</label>
        <input type="text" id="passaporte" name="passaporte">

        <label for="dataEmissaoPassaporte">Data de emissão do passaporte:</label>
        <input type="date" id="dataEmissaoPassaporte" name="dataEmissaoPassaporte">

        <label for="dataValidadePassaporte">Data de validade do passaporte:</label>
        <input type="date" id="dataValidadePassaporte" name="dataValidadePassaporte">

        <label for="localEmissaoPassaporte">Local de emissão do passaporte:</label>
        <input type="text" id="localEmissaoPassaporte" name="localEmissaoPassaporte">

        <h3>Informações de Contato</h3>
        <label for="cep">CEP:</label>
        <input type="text" id="cep" name="cep" placeholder="Digite o CEP">

        <label for="endereco">Endereço completo (rua, número, bairro):</label>
        <textarea id="endereco" name="endereco"></textarea>

        <label for="cidade">Cidade:</label>
        <input type="text" id="cidade" name="cidade">

        <label for="estado">Estado/Província:</label>
        <input type="text" id="estado" name="estado">

        <label for="pais">País:</label>
        <input type="text" id="pais" name="pais">

        <label for="telefone">Número de telefone (com código do país):</label>
        <input type="tel" id="telefone" name="telefone">

        <label for="email">E-mail:</label>
        <input type="email" id="email" name="email">

        <h3>Informações Familiares</h3>
        <label for="temPaisVivos">Seus pais estão vivos?</label>
        <select id="temPaisVivos" name="temPaisVivos" onchange="toggleParentsInfo()">
            <option value="">Selecione</option>
            <option value="Sim">Sim</option>
            <option value="Não">Não</option>
        </select>

        <div id="parentsInfo" class="hidden">
            <label for="nomePai">Nome completo do pai:</label>
            <input type="text" id="nomePai" name="nomePai">

            <label for="nascimentoPai">Data de nascimento do pai:</label>
            <input type="date" id="nascimentoPai" name="nascimentoPai">

            <label for="nomeMae">Nome completo da mãe:</label>
            <input type="text" id="nomeMae" name="nomeMae">

            <label for="nascimentoMae">Data de nascimento da mãe:</label>
            <input type="date" id="nascimentoMae" name="nascimentoMae">

            <label for="paisNosEUA">Seus pais estão nos EUA?</label>
            <select id="paisNosEUA" name="paisNosEUA" onchange="toggleParentsInUSInfo()">
                <option value="">Selecione</option>
                <option value="Sim">Sim</option>
                <option value="Não">Não</option>
            </select>

            <div id="parentsInUSInfo" class="hidden">
                <label for="explicacaoPaisEUA">Explique a situação dos seus pais nos EUA:</label>
                <textarea id="explicacaoPaisEUA" name="explicacaoPaisEUA"></textarea>
            </div>
        </div>

        <label for="temConhecidosEUA">Tem conhecidos nos EUA?</label>
        <select id="temConhecidosEUA" name="temConhecidosEUA" onchange="toggleAcquaintancesInfo()">
            <option value="">Selecione</option>
            <option value="Sim">Sim</option>
            <option value="Não">Não</option>
        </select>

        <div id="acquaintancesInfo" class="hidden">
            <h4>Dados do Conhecido nos EUA</h4>
            <label for="nomeConhecido">Nome completo do conhecido:</label>
            <input type="text" id="nomeConhecido" name="nomeConhecido">

            <label for="telefoneConhecido">Telefone do conhecido (com código do país):</label>
            <input type="tel" id="telefoneConhecido" name="telefoneConhecido">

            <label for="emailConhecido">E-mail do conhecido:</label>
            <input type="email" id="emailConhecido" name="emailConhecido">

            <label for="vinculoConhecido">Vínculo com o solicitante (ex.: amigo, parente):</label>
            <input type="text" id="vinculoConhecido" name="vinculoConhecido">
        </div>

        <h3>Detalhes da Viagem</h3>
        <label for="objetivo">Objetivo da viagem aos EUA:</label>
        <select id="objetivo" name="objetivo">
            <option value="">Selecione</option>
            <option value="Turismo">Turismo</option>
            <option value="Negócios">Negócios</option>
            <option value="Estudo">Estudo</option>
            <option value="Trabalho">Trabalho</option>
            <option value="Visita a Familiares">Visita a Familiares</option>
            <option value="Outro">Outro</option>
        </select>

        <label for="chegada">Data prevista de chegada aos EUA:</label>
        <input type="date" id="chegada" name="chegada">

        <label for="tempo">Quanto tempo pretende ficar nos EUA? (ex.: 2 semanas, 6 meses):</label>
        <input type="text" id="tempo" name="tempo">

        <label for="enderecoEUA">Endereço onde ficará nos EUA (rua, cidade, estado, CEP):</label>
        <textarea id="enderecoEUA" name="enderecoEUA"></textarea>

        <label for="quemPaga">Quem está pagando pela viagem?</label>
        <select id="quemPaga" name="quemPaga" onchange="togglePayerInfo()">
            <option value="">Selecione</option>
            <option value="Eu mesmo">Eu mesmo</option>
            <option value="Outra pessoa">Outra pessoa</option>
        </select>

        <div id="payerInfo" class="hidden">
            <h4>Dados da Pessoa Pagante</h4>
            <label for="payerNome">Nome completo da pessoa pagante:</label>
            <input type="text" id="payerNome" name="payerNome">

            <label for="payerSameAddress">O endereço é o mesmo do solicitante?</label>
            <select id="payerSameAddress" name="payerSameAddress" onchange="togglePayerAddressInfo()">
                <option value="">Selecione</option>
                <option value="Sim">Sim</option>
                <option value="Não">Não</option>
            </select>

            <div id="payerAddressInfo" class="hidden">
                <label for="payerCEP">CEP:</label>
                <input type="text" id="payerCEP" name="payerCEP">

                <label for="payerEndereco">Endereço completo (rua, número, bairro):</label>
                <textarea id="payerEndereco" name="payerEndereco"></textarea>

                <label for="payerCidade">Cidade:</label>
                <input type="text" id="payerCidade" name="payerCidade">

                <label for="payerEstado">Estado/Província:</label>
                <input type="text" id="payerEstado" name="payerEstado">

                <label for="payerPais">País:</label>
                <input type="text" id="payerPais" name="payerPais">
            </div>

            <label for="payerEmail">E-mail da pessoa pagante:</label>
            <input type="email" id="payerEmail" name="payerEmail">

            <label for="payerTelefone">Telefone da pessoa pagante (com código do país):</label>
            <input type="tel" id="payerTelefone" name="payerTelefone">

            <label for="payerVinculo">Vínculo com o solicitante (ex.: pai, amigo, empregador):</label>
            <input type="text" id="payerVinculo" name="payerVinculo">
        </div>

        <label for="temCompanheiros">Vai viajar com alguém?</label>
        <select id="temCompanheiros" name="temCompanheiros" onchange="toggleTravelCompanionsInfo()">
            <option value="">Selecione</option>
            <option value="Sim">Sim</option>
            <option value="Não">Não</option>
        </select>

        <div id="travelCompanionsInfo" class="hidden">
            <label for="nomeCompanheiro">Nome completo do(s) companheiro(s) de viagem:</label>
            <textarea id="nomeCompanheiro" name="nomeCompanheiro"></textarea>

            <label for="relacaoCompanheiro">Relação com o(s) companheiro(s) (ex.: amigo, colega):</label>
            <input type="text" id="relacaoCompanheiro" name="relacaoCompanheiro">
        </div>

        <h3>Informações de Trabalho</h3>
        <label for="ocupacao">Ocupação atual:</label>
        <input type="text" id="ocupacao" name="ocupacao">

        <label for="empregador">Nome do empregador:</label>
        <input type="text" id="empregador" name="empregador">

        <label for="enderecoEmpregador">Endereço do empregador:</label>
        <textarea id="enderecoEmpregador" name="enderecoEmpregador"></textarea>

        <label for="telefoneEmpregador">Telefone do empregador:</label>
        <input type="tel" id="telefoneEmpregador" name="telefoneEmpregador">

        <label for="dataInicioTrabalho">Data de início no emprego:</label>
        <input type="date" id="dataInicioTrabalho" name="dataInicioTrabalho">

        <label for="rendaMensal">Renda mensal (em reais):</label>
        <input type="text" id="rendaMensal" name="rendaMensal">

        <h3>Informações de Educação</h3>
        <label for="nivelEducacao">Nível mais alto de educação concluído:</label>
        <select id="nivelEducacao" name="nivelEducacao">
            <option value="">Selecione</option>
            <option value="Ensino Fundamental">Ensino Fundamental</option>
            <option value="Ensino Médio">Ensino Médio</option>
            <option value="Ensino Superior">Ensino Superior</option>
            <option value="Pós-Graduação">Pós-Graduação</option>
        </select>

        <label for="instituicao">Nome da instituição educacional:</label>
        <input type="text" id="instituicao" name="instituicao">

        <label for="enderecoInstituicao">Endereço da instituição:</label>
        <textarea id="enderecoInstituicao" name="enderecoInstituicao"></textarea>

        <label for="dataInicioEducacao">Data de início do curso:</label>
        <input type="date" id="dataInicioEducacao" name="dataInicioEducacao">

        <label for="dataFimEducacao">Data de conclusão do curso:</label>
        <input type="date" id="dataFimEducacao" name="dataFimEducacao">

        <h3>Histórico de Viagens</h3>
        <label for="primeiroVisto">É o seu primeiro visto ou uma renovação?</label>
        <select id="primeiroVisto" name="primeiroVisto" onchange="toggleRenewalInfo()">
            <option value="">Selecione</option>
            <option value="Primeiro visto">Primeiro visto</option>
            <option value="Renovação">Renovação</option>
        </select>

        <div id="renewalInfo" class="hidden">
            <label for="numeroVistoAnteriorRenovacao">Número do visto anterior:</label>
            <input type="text" id="numeroVistoAnteriorRenovacao" name="numeroVistoAnteriorRenovacao">

            <label for="dataEmissaoVistoAnterior">Data de emissão do visto anterior:</label>
            <input type="date" id="dataEmissaoVistoAnterior" name="dataEmissaoVistoAnterior">

            <label for="dataValidadeVistoAnterior">Data de validade do visto anterior:</label>
            <input type="date" id="dataValidadeVistoAnterior" name="dataValidadeVistoAnterior">

            <label for="localEmissaoVistoAnterior">Local de emissão do visto anterior:</label>
            <input type="text" id="localEmissaoVistoAnterior" name="localEmissaoVistoAnterior">
        </div>

        <label for="visitouEUA">Já visitou os EUA antes?</label>
        <select id="visitouEUA" name="visitouEUA" onchange="togglePreviousUSVisaInfo()">
            <option value="">Selecione</option>
            <option value="Sim">Sim</option>
            <option value="Não">Não</option>
        </select>

        <label for="impressaoDigital">Já teve impressão digital dos dedos coletada?</label>
        <select id="impressaoDigital" name="impressaoDigital">
            <option value="">Selecione</option>
            <option value="Sim">Sim</option>
            <option value="Não">Não</option>
        </select>

        <div id="previousUSVisaInfo" class="hidden">
            <label for="dataUltimaVisita">Data da última visita aos EUA:</label>
            <input type="date" id="dataUltimaVisita" name="dataUltimaVisita">

            <label for="tempoUltimaVisita">Tempo de estadia na última visita:</label>
            <input type="text" id="tempoUltimaVisita" name="tempoUltimaVisita">

            <label for="numeroVistoAnterior">Número do visto anterior (se aplicável):</label>
            <input type="text" id="numeroVistoAnterior" name="numeroVistoAnterior">
        </div>

        <label for="outrosPaises">Países visitados nos últimos 5 anos:</label>
        <textarea id="outrosPaises" name="outrosPaises"></textarea>

        <label for="vistoNegado">Já teve um visto americano negado?</label>
        <select id="vistoNegado" name="vistoNegado" onchange="toggleVisaDeniedDetails()">
            <option value="">Selecione</option>
            <option value="Sim">Sim</option>
            <option value="Não">Não</option>
        </select>

        <label for="entradaRecusada">Já foi negada admissão aos EUA ou teve entrada recusada?</label>
        <select id="entradaRecusada" name="entradaRecusada" onchange="toggleVisaDeniedDetails()">
            <option value="">Selecione</option>
            <option value="Sim">Sim</option>
            <option value="Não">Não</option>
        </select>

        <div id="visaDeniedDetails" class="hidden">
            <label for="detalhesVistoNegado">Detalhes da negativa (data e motivo):</label>
            <textarea id="detalhesVistoNegado" name="detalhesVistoNegado"></textarea>
        </div>

        <h3>Declaração</h3>
        <p>Eu, <input type="text" id="declaracaoNome" name="declaracaoNome" placeholder="Nome completo" required>, declaro, sob as penas da lei, que li e compreendi integralmente todas as questões contidas nesta solicitação de visto e afirmo que as respostas por mim fornecidas são verdadeiras, completas e corretas, conforme o meu melhor conhecimento e convicção.</p>

        <p><strong>Declaro estar ciente de que:</strong></p>
        <ol>
            <li>Qualquer declaração falsa, incompleta ou enganosa poderá resultar na recusa permanente do visto ou na negativa de admissão nos Estados Unidos, conforme disposto na legislação aplicável.</li>
            <li>Todas as informações prestadas nesta solicitação constituem declarações juramentadas, realizadas sob pena de perjúrio, nos termos do disposto no <em>28 U.S.C. § 1746</em>.</li>
            <li>Informações adicionais poderão ser requisitadas pelas autoridades competentes após a análise desta solicitação, sendo minha responsabilidade fornecê-las tempestivamente.</li>
            <li>As informações contidas nesta solicitação poderão ser compartilhadas com outras agências governamentais dos Estados Unidos, que possuem autoridade legal para utilizá-las para fins de aplicação da lei ou para propósitos imigratórios, conforme permitido pela legislação vigente.</li>
            <li>A fotografia fornecida com esta solicitação poderá ser utilizada pelas autoridades americanas para fins de verificação de identidade, empregabilidade ou outros objetivos legais previstos na legislação dos Estados Unidos.</li>
        </ol>

        <p><strong>Declaro ainda:</strong></p>
        <ol start="6">
            <li>Que sou exclusivamente responsável pela autenticidade e exatidão dos documentos apresentados e das informações prestadas nesta solicitação.</li>
            <li>Que tenho pleno conhecimento de que a concessão ou negativa do visto é prerrogativa exclusiva da Autoridade Consular Americana, não cabendo a terceiros qualquer ingerência sobre tal decisão.</li>
            <li>Que estou ciente de que, em processos de renovação de visto, entrevistas presenciais poderão ser exigidas a critério exclusivo da Autoridade Consular Americana.</li>
            <li>Que reconheço que o serviço contratado constitui assessoria relacionada ao processo de preenchimento de documentação, agendamento de biometria e entrevista, não abrangendo serviços de entrega ou retirada de documentos no Centro de Atendimento ao Solicitante de Visto (CASV), sendo necessária a contratação de um agente colaborador, caso eu deseje tais serviços adicionais.</li>
            <li>Que a aposição de minha assinatura eletrônica neste documento possui validade jurídica, conforme a legislação aplicável, e representa meu reconhecimento expresso dos serviços contratados.</li>
        </ol>

        <p><strong>Autorização:</strong></p>
        <p>Declaro, por fim, ter revisado e conferido todos os dados por mim apresentados, autorizando expressamente a empresa <strong>Objetivo Turismo Ltda.</strong>, contratada diretamente por mim ou por intermédio de minha agência, a proceder com o envio eletrônico do Formulário DS-160 ao Consulado Americano, bem como a realizar o pagamento das taxas e o agendamento necessários à tramitação do meu pedido de visto.</p>

        <label for="declaracaoLocal">Local:</label>
        <input type="text" id="declaracaoLocal" name="declaracaoLocal" required>

        <label for="declaracaoData">Data:</label>
        <input type="date" id="declaracaoData" name="declaracaoData" required>

        <label>Concordo com os termos desta declaração <input type="checkbox" id="aceiteDeclaracao" name="aceiteDeclaracao" required style="width: auto; margin-left: 10px;"></label>

        <button type="submit">Enviar Formulário</button>
    </form>

    <script>
        // Função para alternar visibilidade dos dados do cônjuge
        function toggleSpouseInfo() {
            const estadoCivil = document.getElementById('estadoCivil').value;
            const spouseInfo = document.getElementById('spouseInfo');
            const spousePassportInfo = document.getElementById('spousePassportInfo');
            const spouseDeathInfo = document.getElementById('spouseDeathInfo');

            if (estadoCivil && estadoCivil !== 'Solteiro') {
                spouseInfo.classList.remove('hidden');
            } else {
                spouseInfo.classList.add('hidden');
            }

            if (estadoCivil === 'Casado' || estadoCivil === 'União Estável') {
                spousePassportInfo.classList.remove('hidden');
            } else {
                spousePassportInfo.classList.add('hidden');
            }

            if (estadoCivil === 'Viúvo') {
                spouseDeathInfo.classList.remove('hidden');
            } else {
                spouseDeathInfo.classList.add('hidden');
            }
        }

        // Função para alternar visibilidade das informações dos pais
        function toggleParentsInfo() {
            const temPaisVivos = document.getElementById('temPaisVivos').value;
            const parentsInfo = document.getElementById('parentsInfo');
            if (temPaisVivos === 'Sim') {
                parentsInfo.classList.remove('hidden');
            } else {
                parentsInfo.classList.add('hidden');
            }
        }

        // Função para alternar visibilidade da explicação dos pais nos EUA
        function toggleParentsInUSInfo() {
            const paisNosEUA = document.getElementById('paisNosEUA').value;
            const parentsInUSInfo = document.getElementById('parentsInUSInfo');
            if (paisNosEUA === 'Sim') {
                parentsInUSInfo.classList.remove('hidden');
            } else {
                parentsInUSInfo.classList.add('hidden');
            }
        }

        // Função para alternar visibilidade dos conhecidos nos EUA
        function toggleAcquaintancesInfo() {
            const temConhecidosEUA = document.getElementById('temConhecidosEUA').value;
            const acquaintancesInfo = document.getElementById('acquaintancesInfo');
            if (temConhecidosEUA === 'Sim') {
                acquaintancesInfo.classList.remove('hidden');
            } else {
                acquaintancesInfo.classList.add('hidden');
            }
        }

        // Função para alternar visibilidade das informações do pagante
        function togglePayerInfo() {
            const quemPaga = document.getElementById('quemPaga').value;
            const payerInfo = document.getElementById('payerInfo');
            if (quemPaga === 'Outra pessoa') {
                payerInfo.classList.remove('hidden');
            } else {
                payerInfo.classList.add('hidden');
            }
        }

        // Função para alternar visibilidade do endereço do pagante
        function togglePayerAddressInfo() {
            const payerSameAddress = document.getElementById('payerSameAddress').value;
            const payerAddressInfo = document.getElementById('payerAddressInfo');
            if (payerSameAddress === 'Não') {
                payerAddressInfo.classList.remove('hidden');
            } else {
                payerAddressInfo.classList.add('hidden');
            }
        }

        // Função para alternar visibilidade dos companheiros de viagem
        function toggleTravelCompanionsInfo() {
            const temCompanheiros = document.getElementById('temCompanheiros').value;
            const travelCompanionsInfo = document.getElementById('travelCompanionsInfo');
            if (temCompanheiros === 'Sim') {
                travelCompanionsInfo.classList.remove('hidden');
            } else {
                travelCompanionsInfo.classList.add('hidden');
            }
        }

        // Função para alternar visibilidade das informações de renovação
        function toggleRenewalInfo() {
            const primeiroVisto = document.getElementById('primeiroVisto').value;
            const renewalInfo = document.getElementById('renewalInfo');
            if (primeiroVisto === 'Renovação') {
                renewalInfo.classList.remove('hidden');
            } else {
                renewalInfo.classList.add('hidden');
            }
        }

        // Função para alternar visibilidade das informações de visto anterior
        function togglePreviousUSVisaInfo() {
            const visitouEUA = document.getElementById('visitouEUA').value;
            const previousUSVisaInfo = document.getElementById('previousUSVisaInfo');
            if (visitouEUA === 'Sim') {
                previousUSVisaInfo.classList.remove('hidden');
            } else {
                previousUSVisaInfo.classList.add('hidden');
            }
        }

        // Função para alternar visibilidade dos detalhes de visto negado
        function toggleVisaDeniedDetails() {
            const vistoNegado = document.getElementById('vistoNegado').value;
            const entradaRecusada = document.getElementById('entradaRecusada').value;
            const visaDeniedDetails = document.getElementById('visaDeniedDetails');
            if (vistoNegado === 'Sim' || entradaRecusada === 'Sim') {
                visaDeniedDetails.classList.remove('hidden');
            } else {
                visaDeniedDetails.classList.add('hidden');
            }
        }

        // Função para formatar data no padrão brasileiro
        function formatDateBr(dateStr) {
            if (!dateStr) return 'Não informado';
            const date = new Date(dateStr);
            return date.toLocaleDateString('pt-BR');
        }

        // Função para gerar o PDF
        function generatePDF(event) {
            event.preventDefault();
            const { jsPDF } = window.jspdf;
            const form = document.getElementById('visaForm');
            const formData = new FormData(form);
            const doc = new jsPDF();
            const pageWidth = doc.internal.pageSize.width;
            const margin = 10;
            let yPosition = 20;

            doc.setFontSize(16);
            doc.text("Formulário de Solicitação de Visto Americano", margin, yPosition);
            yPosition += 10;

            doc.setFontSize(12);
            yPosition += 10;
            doc.text("Informações Pessoais", margin, yPosition);
            yPosition += 10;
            doc.text(`Nome: ${formData.get('nome') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Sobrenome: ${formData.get('sobrenome') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Outros Nomes: ${formData.get('outrosNomes') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Data de Nascimento: ${formatDateBr(formData.get('nascimento'))}`, margin, yPosition);
            yPosition += 10;
            doc.text(`CPF: ${formData.get('cpf') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Local de Nascimento: ${formData.get('localNascimento') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Sexo: ${formData.get('sexo') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Estado Civil: ${formData.get('estadoCivil') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;

            if (formData.get('estadoCivil') && formData.get('estadoCivil') !== 'Solteiro') {
                doc.text("Dados do Cônjuge", margin, yPosition);
                yPosition += 10;
                doc.text(`Nome do Cônjuge: ${formData.get('spouseNome') || 'Não informado'}`, margin, yPosition);
                yPosition += 10;
                doc.text(`Data de Nascimento do Cônjuge: ${formatDateBr(formData.get('spouseNascimento'))}`, margin, yPosition);
                yPosition += 10;
                doc.text(`Local de Nascimento do Cônjuge: ${formData.get('spouseLocalNascimento') || 'Não informado'}`, margin, yPosition);
                yPosition += 10;
                if (formData.get('estadoCivil') === 'Casado' || formData.get('estadoCivil') === 'União Estável') {
                    doc.text(`Passaporte do Cônjuge: ${formData.get('spousePassaporte') || 'Não informado'}`, margin, yPosition);
                    yPosition += 10;
                }
                if (formData.get('estadoCivil') === 'Viúvo') {
                    doc.text(`Data de Falecimento do Cônjuge: ${formatDateBr(formData.get('spouseFalecimento'))}`, margin, yPosition);
                    yPosition += 10;
                }
            }

            doc.text(`Nacionalidade: ${formData.get('nacionalidade') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Outras Nacionalidades: ${formData.get('outrasNacionalidades') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Passaporte: ${formData.get('passaporte') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Data de Emissão do Passaporte: ${formatDateBr(formData.get('dataEmissaoPassaporte'))}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Data de Validade do Passaporte: ${formatDateBr(formData.get('dataValidadePassaporte'))}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Local de Emissão do Passaporte: ${formData.get('localEmissaoPassaporte') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;

            if (yPosition > 270) {
                doc.addPage();
                yPosition = margin;
            }
            doc.text("Informações de Contato", margin, yPosition);
            yPosition += 10;
            doc.text(`CEP: ${formData.get('cep') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Endereço: ${formData.get('endereco') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Cidade: ${formData.get('cidade') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Estado: ${formData.get('estado') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            doc.text(`País: ${formData.get('pais') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Telefone: ${formData.get('telefone') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            doc.text(`E-mail: ${formData.get('email') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;

            if (yPosition > 270) {
                doc.addPage();
                yPosition = margin;
            }
            doc.text("Informações Familiares", margin, yPosition);
            yPosition += 10;
            doc.text(`Pais Vivos: ${formData.get('temPaisVivos') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            if (formData.get('temPaisVivos') === 'Sim') {
                doc.text(`Nome do Pai: ${formData.get('nomePai') || 'Não informado'}`, margin, yPosition);
                yPosition += 10;
                doc.text(`Data de Nascimento do Pai: ${formatDateBr(formData.get('nascimentoPai'))}`, margin, yPosition);
                yPosition += 10;
                doc.text(`Nome da Mãe: ${formData.get('nomeMae') || 'Não informado'}`, margin, yPosition);
                yPosition += 10;
                doc.text(`Data de Nascimento da Mãe: ${formatDateBr(formData.get('nascimentoMae'))}`, margin, yPosition);
                yPosition += 10;
                doc.text(`Pais nos EUA: ${formData.get('paisNosEUA') || 'Não informado'}`, margin, yPosition);
                yPosition += 10;
                if (formData.get('paisNosEUA') === 'Sim') {
                    doc.text(`Explicação sobre Pais nos EUA: ${formData.get('explicacaoPaisEUA') || 'Não informado'}`, margin, yPosition);
                    yPosition += 10;
                }
            }

            doc.text(`Conhecidos nos EUA: ${formData.get('temConhecidosEUA') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            if (formData.get('temConhecidosEUA') === 'Sim') {
                doc.text(`Nome do Conhecido: ${formData.get('nomeConhecido') || 'Não informado'}`, margin, yPosition);
                yPosition += 10;
                doc.text(`Telefone do Conhecido: ${formData.get('telefoneConhecido') || 'Não informado'}`, margin, yPosition);
                yPosition += 10;
                doc.text(`E-mail do Conhecido: ${formData.get('emailConhecido') || 'Não informado'}`, margin, yPosition);
                yPosition += 10;
                doc.text(`Vínculo com o Conhecido: ${formData.get('vinculoConhecido') || 'Não informado'}`, margin, yPosition);
                yPosition += 10;
            }

            if (yPosition > 270) {
                doc.addPage();
                yPosition = margin;
            }
            doc.text("Detalhes da Viagem", margin, yPosition);
            yPosition += 10;
            doc.text(`Objetivo da Viagem: ${formData.get('objetivo') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Data de Chegada: ${formatDateBr(formData.get('chegada'))}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Tempo de Estadia: ${formData.get('tempo') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Endereço nos EUA: ${formData.get('enderecoEUA') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Quem Paga: ${formData.get('quemPaga') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            if (formData.get('quemPaga') === 'Outra pessoa') {
                doc.text(`Nome do Pagante: ${formData.get('payerNome') || 'Não informado'}`, margin, yPosition);
                yPosition += 10;
                doc.text(`Endereço Igual ao Solicitante: ${formData.get('payerSameAddress') || 'Não informado'}`, margin, yPosition);
                yPosition += 10;
                if (formData.get('payerSameAddress') === 'Não') {
                    doc.text(`CEP do Pagante: ${formData.get('payerCEP') || 'Não informado'}`, margin, yPosition);
                    yPosition += 10;
                    doc.text(`Endereço do Pagante: ${formData.get('payerEndereco') || 'Não informado'}`, margin, yPosition);
                    yPosition += 10;
                    doc.text(`Cidade do Pagante: ${formData.get('payerCidade') || 'Não informado'}`, margin, yPosition);
                    yPosition += 10;
                    doc.text(`Estado do Pagante: ${formData.get('payerEstado') || 'Não informado'}`, margin, yPosition);
                    yPosition += 10;
                    doc.text(`País do Pagante: ${formData.get('payerPais') || 'Não informado'}`, margin, yPosition);
                    yPosition += 10;
                }
                doc.text(`E-mail do Pagante: ${formData.get('payerEmail') || 'Não informado'}`, margin, yPosition);
                yPosition += 10;
                doc.text(`Telefone do Pagante: ${formData.get('payerTelefone') || 'Não informado'}`, margin, yPosition);
                yPosition += 10;
                doc.text(`Vínculo com o Pagante: ${formData.get('payerVinculo') || 'Não informado'}`, margin, yPosition);
                yPosition += 10;
            }
            doc.text(`Companheiros de Viagem: ${formData.get('temCompanheiros') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            if (formData.get('temCompanheiros') === 'Sim') {
                doc.text(`Nome do(s) Companheiro(s): ${formData.get('nomeCompanheiro') || 'Não informado'}`, margin, yPosition);
                yPosition += 10;
                doc.text(`Relação com o(s) Companheiro(s): ${formData.get('relacaoCompanheiro') || 'Não informado'}`, margin, yPosition);
                yPosition += 10;
            }

            if (yPosition > 270) {
                doc.addPage();
                yPosition = margin;
            }
            doc.text("Informações de Trabalho", margin, yPosition);
            yPosition += 10;
            doc.text(`Ocupação: ${formData.get('ocupacao') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Empregador: ${formData.get('empregador') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Endereço do Empregador: ${formData.get('enderecoEmpregador') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Telefone do Empregador: ${formData.get('telefoneEmpregador') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Data de Início no Trabalho: ${formatDateBr(formData.get('dataInicioTrabalho'))}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Renda Mensal: ${formData.get('rendaMensal') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;

            if (yPosition > 270) {
                doc.addPage();
                yPosition = margin;
            }
            doc.text("Informações de Educação", margin, yPosition);
            yPosition += 10;
            doc.text(`Nível de Educação: ${formData.get('nivelEducacao') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Instituição: ${formData.get('instituicao') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Endereço da Instituição: ${formData.get('enderecoInstituicao') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Data de Início do Curso: ${formatDateBr(formData.get('dataInicioEducacao'))}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Data de Conclusão do Curso: ${formatDateBr(formData.get('dataFimEducacao'))}`, margin, yPosition);
            yPosition += 10;

            if (yPosition > 270) {
                doc.addPage();
                yPosition = margin;
            }
            doc.text("Histórico de Viagens", margin, yPosition);
            yPosition += 10;
            doc.text(`Primeiro Visto ou Renovação: ${formData.get('primeiroVisto') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            if (formData.get('primeiroVisto') === 'Renovação') {
                doc.text(`Número do Visto Anterior: ${formData.get('numeroVistoAnteriorRenovacao') || 'Não informado'}`, margin, yPosition);
                yPosition += 10;
                doc.text(`Data de Emissão do Visto Anterior: ${formatDateBr(formData.get('dataEmissaoVistoAnterior'))}`, margin, yPosition);
                yPosition += 10;
                doc.text(`Data de Validade do Visto Anterior: ${formatDateBr(formData.get('dataValidadeVistoAnterior'))}`, margin, yPosition);
                yPosition += 10;
                doc.text(`Local de Emissão do Visto Anterior: ${formData.get('localEmissaoVistoAnterior') || 'Não informado'}`, margin, yPosition);
                yPosition += 10;
            }
            doc.text(`Já Visitou os EUA: ${formData.get('visitouEUA') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            if (formData.get('visitouEUA') === 'Sim') {
                doc.text(`Data da Última Visita: ${formatDateBr(formData.get('dataUltimaVisita'))}`, margin, yPosition);
                yPosition += 10;
                doc.text(`Tempo da Última Visita: ${formData.get('tempoUltimaVisita') || 'Não informado'}`, margin, yPosition);
                yPosition += 10;
                doc.text(`Número do Visto Anterior: ${formData.get('numeroVistoAnterior') || 'Não informado'}`, margin, yPosition);
                yPosition += 10;
            }
            doc.text(`Impressão Digital Coletada: ${formData.get('impressaoDigital') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Países Visitados (Últimos 5 Anos): ${formData.get('outrosPaises') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Visto Negado: ${formData.get('vistoNegado') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Entrada Recusada nos EUA: ${formData.get('entradaRecusada') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            if (formData.get('vistoNegado') === 'Sim' || formData.get('entradaRecusada') === 'Sim') {
                doc.text(`Detalhes da Negativa: ${formData.get('detalhesVistoNegado') || 'Não informado'}`, margin, yPosition);
                yPosition += 10;
            }

            if (yPosition > 270) {
                doc.addPage();
                yPosition = margin;
            }
            doc.text("Declaração", margin, yPosition);
            yPosition += 10;
            doc.text(`Nome: ${formData.get('declaracaoNome') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Local: ${formData.get('declaracaoLocal') || 'Não informado'}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Data: ${formatDateBr(formData.get('declaracaoData'))}`, margin, yPosition);
            yPosition += 10;
            doc.text(`Aceite dos Termos: ${formData.get('aceiteDeclaracao') ? 'Sim' : 'Não'}`, margin, yPosition);
            yPosition += 10;

            const declaracaoText = `Eu, ${formData.get('declaracaoNome') || 'Não informado'}, declaro, sob as penas da lei, que li e compreendi integralmente todas as questões contidas nesta solicitação de visto e afirmo que as respostas por mim fornecidas são verdadeiras, completas e corretas, conforme o meu melhor conhecimento e convicção.`;
            doc.splitTextToSize(declaracaoText, pageWidth - 2 * margin).forEach(line => {
                if (yPosition > 270) {
                    doc.addPage();
                    yPosition = margin;
                }
                doc.text(line, margin, yPosition);
                yPosition += 7;
            });

            yPosition += 5;
            doc.text("Declaro estar ciente de que:", margin, yPosition);
            yPosition += 10;
            const termos1 = [
                "1. Qualquer declaração falsa, incompleta ou enganosa poderá resultar na recusa permanente do visto ou na negativa de admissão nos Estados Unidos, conforme disposto na legislação aplicável.",
                "2. Todas as informações prestadas nesta solicitação constituem declarações juramentadas, realizadas sob pena de perjúrio, nos termos do disposto no 28 U.S.C. § 1746.",
                "3. Informações adicionais poderão ser requisitadas pelas autoridades competentes após a análise desta solicitação, sendo minha responsabilidade fornecê-las tempestivamente.",
                "4. As informações contidas nesta solicitação poderão ser compartilhadas com outras agências governamentais dos Estados Unidos, que possuem autoridade legal para utilizá-las para fins de aplicação da lei ou para propósitos imigratórios, conforme permitido pela legislação vigente.",
                "5. A fotografia fornecida com esta solicitação poderá ser utilizada pelas autoridades americanas para fins de verificação de identidade, empregabilidade ou outros objetivos legais previstos na legislação dos Estados Unidos."
            ];
            termos1.forEach(termo => {
                if (yPosition > 270) {
                    doc.addPage();
                    yPosition = margin;
                }
                doc.splitTextToSize(termo, pageWidth - 2 * margin).forEach(line => {
                    doc.text(line, margin, yPosition);
                    yPosition += 7;
                });
                yPosition += 3;
            });

            yPosition += 5;
            doc.text("Declaro ainda:", margin, yPosition);
            yPosition += 10;
            const termos2 = [
                "6. Que sou exclusivamente responsável pela autenticidade e exatidão dos documentos apresentados e das informações prestadas nesta solicitação.",
                "7. Que tenho pleno conhecimento de que a concessão ou negativa do visto é prerrogativa exclusiva da Autoridade Consular Americana, não cabendo a terceiros qualquer ingerência sobre tal decisão.",
                "8. Que estou ciente de que, em processos de renovação de visto, entrevistas presenciais poderão ser exigidas a critério exclusivo da Autoridade Consular Americana.",
                "9. Que reconheço que o serviço contratado constitui assessoria relacionada ao processo de preenchimento de documentação, agendamento de biometria e entrevista, não abrangendo serviços de entrega ou retirada de documentos no Centro de Atendimento ao Solicitante de Visto (CASV), sendo necessária a contratação de um agente colaborador, caso eu deseje tais serviços adicionais.",
                "10. Que a aposição de minha assinatura eletrônica neste documento possui validade jurídica, conforme a legislação aplicável, e representa meu reconhecimento expresso dos serviços contratados."
            ];
            termos2.forEach(termo => {
                if (yPosition > 270) {
                    doc.addPage();
                    yPosition = margin;
                }
                doc.splitTextToSize(termo, pageWidth - 2 * margin).forEach(line => {
                    doc.text(line, margin, yPosition);
                    yPosition += 7;
                });
                yPosition += 3;
            });

            yPosition += 5;
            doc.text("Autorização:", margin, yPosition);
            yPosition += 10;
            const autorizacaoText = "Declaro, por fim, ter revisado e conferido todos os dados por mim apresentados, autorizando expressamente a empresa Objetivo Turismo Ltda., contratada diretamente por mim ou por intermédio de minha agência, a proceder com o envio eletrônico do Formulário DS-160 ao Consulado Americano, bem como a realizar o pagamento das taxas e o agendamento necessários à tramitação do meu pedido de visto.";
            doc.splitTextToSize(autorizacaoText, pageWidth - 2 * margin).forEach(line => {
                if (yPosition > 270) {
                    doc.addPage();
                    yPosition = margin;
                }
                doc.text(line, margin, yPosition);
                yPosition += 7;
            });

            doc.save('formulario_visto.pdf');
            alert('Formulário enviado com sucesso! O PDF foi baixado.');
        }

        // Adiciona o evento de submit ao formulário
        document.getElementById('visaForm').addEventListener('submit', generatePDF);
    </script>
</body>
</html>
